# 《CSS世界》技巧

## 1.单行文字居中，多行文字左对齐

[👉demo](http://demo.cssworld.cn/3/2-5.php)

```css
.box {
    text-align: center;
}
.content {
    display: inline-block;
    text-align: left;
}
```

## 2.图片使用max-width时保持比例

* height:auto 是必需的，否则，如果原始图片有设定 height，max-width 生效的时候，图片就会被水平压缩。强制 height 为 auto 可以确保宽度不超出的同时使图片保持原来的比例。

* 但这样也会有体验上的问题，那就是在加载时图片占据高度会从 0 变成计算高度，图文会有明显的瀑布式下落。

```css
img {
    max-width: 100%;
    height: auto!important;
}
```

## 3.高度不定的hover展开效果

[👉demo](http://demo.cssworld.cn/3/3-2.php)

* 使用此方法也有一点要注意，即虽然说从适用范围讲，max-height值越大使用场景越多，但是，**如果 max-height 值太大，在收起的时候可能会有“效果延迟”的问题**,建议 max-height 使用足够安全的最小值，这样，收起时即使有延迟，也会因为时间很短，很难被用户察觉，并不会影响体验。

```css
.element {
    max-height: 0;
    overflow: hidden;
    transition: max-height .25s;
}
.element.active {
    max-height: 666px; /* 一个足够大的最大高度值 */
}
```

## 4.用`<img>`src属性缺省，节约带宽

Web 开发的时候，为了提高加载性能以及节约带宽费用，首屏以下的图片就会通过滚屏加载的方式异步加载，然后，这个即将被异步加载的图片为了布局稳健、体验良好，往往会使用一张透明的图片占位。例如：

```html
<img src="transparent.png">
```

实际上，这个透明的占位图片也是多余的资源，我们直接：

```html
<img>
```

```css
img { visibility: hidden; }
img[src] { visibility: visible; }
```

**注意，这里的`<img>`直接没有 src 属性**，再强调一遍，是直接没有，不是src=""，src=""在很多浏览器下依然会有请求，而且请求的是当前页面数据。当图片的src属性缺省的时候，图片不会有任何请求，是最高效的实现方式。

## 5.使用content属性放置logo

[👉demo](http://demo.cssworld.cn/4/1-5.php)
虽然视觉上文字被替换了，但是屏幕阅读设备阅读的还是文字内容，搜索引擎 SEO抓取的还是原始的文本信息，因此，对页面的可访问性等没有任何影响。

但是，**替换元素的固有尺寸是无法设置的**，如今在移动端retina屏幕几乎是标配，为了图片显示细腻，往往真实图片尺寸是显示图片尺寸的两倍。于是问题就来了，使用content生成图片，我们是无法设置图片的尺寸的，只能迫不得已使用一倍图，然后导致图片看上去有点儿模糊。所以，要想在移动端使用该技术，**建议使用SVG矢量图片**。

```html
<h1>《CSS 世界》</h1>
```

```css
h1 {
    content: url(logo.png);
}
```

## 6.使用content辅助实现“两端对齐”以及“垂直居中/上边缘/下边缘对齐”

[👉demo](http://demo.cssworld.cn/4/1-7.php)
这一方法的最大好处是足够兼容，如果想要兼容IE7浏览器，直接使用标签元素即可，但这种方法也有不足之处，就是**HTML代码需要注意有些地方不能换行或者空格**，有些地方则必须要换行或者有空格，这在多人协作的时候就容易出问题。

```html
<!--  此处不可换行  -->
<div class="box"><i class="bar"></i>
    <i class="bar"></i>
    <i class="bar"></i>
    <i class="bar"></i>
</div>
```

```css
.box {
    width: 256px; 
    height: 256px;
    /* 两端对齐关键 */
    text-align: justify;
}
.box:before {
    content: "";
    display: inline-block;
    height: 100%;
}
.box:after {
    content: "";
    display: inline-block;
    /* 两端对齐关键 */
    /* 生成第二行 */
    width: 100%;
}
.bar {
    display: inline-block;
    width: 20px;
}
```

## 7.使用content插入unicode字符，使"加载中..."的三个点动起来

[👉demo](http://demo.cssworld.cn/4/1-9.php)

```html
正在加载中<dot>...</dot>
```

```css
dot {
    display: inline-block;
    height: 1em;
    line-height: 1;
    text-align: left;
    vertical-align: -.25em;
    overflow: hidden;
}
dot::before {
    display: block;
    content: '...\A..\A.';
    white-space: pre-wrap;
    animation: dot 3s infinite step-start both;
}
@keyframes dot {
    33% { transform: translateY(-2em); }
    66% { transform: translateY(-1em); }
}
```

## 8.content图片生成与新标签页地址标记

[👉demo](http://demo.cssworld.cn/4/1-10.php)

```css
a[target="_blank"]:after {
    content: url(data:image/gif;base64,R0lGODlhBQAFAIABAM0AAAAAACH5BAEAAAEALAAAAAAFAAUAAAIHRIB2eKuOCgA7);
}
```

## 9.content开启闭合符号生成

```html
    <p class="ch"><q>这本书很赞！</q></p>
    <p class="en"><q>This book is very good!</q></p>
    <p class="no"><q>denne bog er fantastisk!</q></p>
```

```css
    /* 为不同语言指定引号的表现 */
    :lang(ch) > q { quotes: '“' '”'; }
    :lang(en) > q { quotes: '"' '"'; }
    :lang(no) > q { quotes: '《' '》' }

    /* 在q标签的前后插入引号 */
    q:before { content: open-quote; }
    q:after { content: close-quote; }
```

## 10.利用padding实现高度可控的分割线

[👉demo](https://demo.cssworld.cn/4/2-2.php)

```html
<a href="">登录</a><a href="">注册</a>
```

```css
a + a:before {
    content: "";
    font-size: 0;
    padding: 10px 3px 1px;
    margin-left: 6px;
    border-left: 1px solid gray;
}
```

## 11.利用padding调节锚点到达位置
原理：非替换内联元素垂直方向padding不加入高度计算，但发生了渲染。

注意：如果我们的`<h3>`标签设置 overflow:hidden，则 Chrome 和 Firefox 浏览器定位不受影响，但是 IE 浏览器会定位在`<h3>`标签位置，这个需要注意。

```html
<h3><span id="hash">标题</span></h3>
```

```css
h3 {
    line-height: 30px;
    font-size: 14px;
}
h3 > span {
    padding-top: 50px;
}
```

## 12.使用padding百分比实现自适应的等比例矩形效果
[👉demo](https://demo.cssworld.cn/4/2-3.php)    

原理：padding 百分比值无论是水平方向还是垂直方向均是相对于宽度计算的。

```css
.box {
    padding: 10% 50%; /*宽高2：1*/
    position: relative;
}
.box > img {
    position: absolute;
    width: 100%; 
    height: 100%;
    left: 0; 
    top: 0;
}
```

## 13.使用padding绘制“三道杠”、“双层圆点”

[👉demo](https://demo.cssworld.cn/4/2-4.php) 

```css
.icon-menu {
    display: inline-block;
    width: 140px; height: 10px;
    padding: 35px 0;
    border-top: 10px solid;
    border-bottom: 10px solid;
    background-color: currentColor;
    background-clip: content-box;
}
```

## 14.通过改变元素内部尺寸，实现两端对齐

```css
ul {
    margin-right: -20px;
}
ul > li {
    float: left;
    width: 100px;
    margin-right: 20px;
}
```


## 15.用margin: auto实现水平垂直居中

[👉demo](http://demo.cssworld.cn/4/3-5.php) 

此时.son 这个元素的尺寸表现为“格式化宽度和格式化高度”，和`<div>`的“正常流宽度”一样，同属于外部尺寸，也就是尺寸自动填充父级元素的可用尺寸，此时我们给.son 设置尺寸。此时宽高被限制，原本应该填充的空间就被空余了出来，这多余的空间就是 margin:auto计算的空间， auto 正好把上下左右剩余空间全部等分了，自然就居中。

```css
.father {
    width: 300px; height:150px;
    position: relative;
}
.son {
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    width: 200px; height: 100px;
    margin: auto;
}
```

## 16.使用幽灵节点与line-height实现多行文本垂直居中

[👉demo](http://demo.cssworld.cn/5/2-4.php) 

```css
.box {
    line-height: 120px;/*使幽灵元素撑起120px高度*/
    background-color: #f0f3f9;
}
.content {
    display: inline-block;
    line-height: 20px;
    margin: 0 20px;
    vertical-align: middle;
}
```

## 17. 基于 vertical-align 属性的水平垂直居中弹框

[👉demo](http://demo.cssworld.cn/5/3-10.php) 

```html
<div class="container">
    <div class="dialog"></dialog>
</div>
```

```css
.container {
    position: fixed;
    top: 0; right: 0; bottom: 0; left: 0;
    background-color: rgba(0,0,0,.5);
    text-align: center;
    font-size: 0;
    white-space: nowrap;
    overflow: auto; 
}
.container:after {
    content: '';
    display: inline-block;
    height: 100%;
    vertical-align: middle;
}
.dialog {
    display: inline-block;
    vertical-align: middle;
    text-align: left;
    font-size: 14px;
    white-space: normal;
}
```

## 18.使用float与流体特性实现一侧定宽，一侧自适应布局

[👉demo](https://demo.cssworld.cn/6/1-2.php) 

```html
<div class="father">
    <img src="zxx.jpg">
    <p class="girl">美女1，美女2，美女3，美女4，美女5，美女6，后宫1，后宫2，后宫3，后宫4，后宫5，后宫6</p>
</div>
```

```css
.father {
    border: 1px solid #444;
    overflow: hidden;
}
.father > img {
    width: 60px; height: 64px;
    float: left;
}
.girl {
    /* 环绕和自适应的区别所在 */
    margin-left: 70px;
}
```

## 19.使用float与流体特性实现两侧定宽，中间自适应布局

```html
<div class="box">
    <a href class="prev">&laquo; 上一章</a>
    <a href class="next">下一章 &raquo;</a>
    <h3 class="title">第 112 章 动物环绕</h3>
</div>
```

```css
.prev {
    float: left;
}
.next {
    float: right;
}
.title {
    margin: 0 70px;
    text-align: center;
}
```

## 20.基于BFC的自适应布局

普通流体元素在设置了 overflow:hidden 后，会自动填满容器中除了浮动元素以外的剩余空间，形成自适应布局效果，而且这种自适应布局要比纯流体自适应更加智能。

* 自适应内容由于封闭而更健壮，容错性更强。

* 自适应内容自动填满浮动以外区域，无须关心浮动元素宽度，可以整站大规模应用。

```html
<div class="bfc">
    <img src="me.jpg" class="left">
    <p class="bfc">小猫 1，小猫 2，...</p>
</div>
```

```css
/*可抽象为以下几个类名*/
.left { float: left; }
.right { float: right; }
.bfc { overflow: hidden; }
```

## 21.防止滚动条让页面产生晃动

```css
html {
    overflow-y: scroll; /* for IE8 */
}
:root {
    overflow-y: auto;
    overflow-x: hidden;
}
:root body {
    position: absolute;
}
body {
    width: 100vw;
    overflow: hidden;
}
```

## 22.使用无依赖绝对定位定位图标

[👉demo](http://demo.cssworld.cn/6/5-5.php)

```html
<span class="icon-x">
    <i class="icon-warn"></i>邮箱格式不准确
</span>
```

```css
.icon-x {
    line-height: 20px;
    padding-left: 20px;
}
.icon-warn {
    position: absolute;
    margin-left: -20px;
    width: 20px; height: 20px;
    background: url(warn.png) no-repeat center;
}
```

## 23.利用 text-align 控制 absolute元素定位

[👉demo](http://demo.cssworld.cn/6/5-10.php)

```html
<div class="alignright">
    <span class="follow"></span>
</div>
```

```css
.alignright {
    height: 0;
    text-align: right;
    overflow: hidden;
}
.alignright:before {
    content: "\2002";
}
.follow {
    position: fixed;
    bottom: 100px;
    z-index: 1;
}
```

## 24.延迟显示元素

[👉demo](http://demo.cssworld.cn/10/2-3.php)

```html
<td>
<a href>操作▾</a>
<div class="list">
    <a href>编辑</a>
    <a href>删除</a>
</div>
</td>
```

```css
.list {
    position: absolute;
    visibility: hidden;
}
td:hover .list {
    visibility: visible;
    transition: visibility 0s .2s;
}
```

    










