# iview定制主题：变量覆盖方式及报错解决

## 使用方式

参考：[定制主题 -- iView](https://www.iviewui.com/docs/guide/theme)

1. 安装 `less` 及 `less-loader`
    ```
    npm install less less-loader --save-dev
    ```

2. 在项目下新建一个 less 文件用来覆盖iView的变量。
    less文件地址按需求存放即可。

    ```less
    @import '~iview/src/styles/index.less';
    // Here are the variables to cover, such as:
    @primary-color: #8c0776;
    ```

3. 在入口文件 `main.js` 内导入这个 less 文件
    ```js
    import Vue from 'vue';
    import iView from 'iview';
    import 'iview/dist/styles/iview.css'
    import '../my-theme/index.less'; //根据文件地址填写

    Vue.use(iView);
    ```

## 报错及解决方法

1. This relative module was not found
    ![This relative module was not found](https://s1.ax1x.com/2018/11/19/FpA17F.png)
    解决方法：找到 '/build/webpack.base.config.js' 文件，删除 `less-loader` 相关配置，例如：
    ```
    {
        test: /\.less$/,
        loader: "style-loader!css-loader!less-loader",
    },
    ```

2. Module build failed: inline javaScript is not enabled.
    ![Module build failed](https://s1.ax1x.com/2018/11/19/FpAGtJ.png)
    解决方法：找到 '/build/utils.js' 文件中的 `generateLoaders` 函数，在如图所示位置加入 `javascriptEnabled: true`。
    ![代码加入位置](https://s1.ax1x.com/2018/11/19/FpA8k4.png)

## 完成效果

1. 自定义主题代码：

    ```less
    @import '~iview/src/styles/index.less';

    // Color
    @primary-color: red;
    ```

2. 效果图：
    * 覆盖前：
        ![覆盖前](https://s1.ax1x.com/2018/11/19/FpArAe.png)

    * 覆盖后： 
        ![覆盖后](https://s1.ax1x.com/2018/11/19/FpAstH.png)

## 参考

* [定制主题 -- iView](https://www.iviewui.com/docs/guide/theme)
* [vue项目main.js引入less文件一直报错](https://blog.csdn.net/sinat_41806435/article/details/82349399)
* [webpack热启动时，报错Module build failed: Syntax Error (5:1) Unknown word](https://blog.csdn.net/china1987427/article/details/80544537)
