# 高度auto元素的transition展开、收起效果

元素从高度为 0 到 auto 的 transition 站卡效果实现。

## 描述

CSS3 可以很好的实现过度效果，但对于从`0`到`auto`这样无定值的过度，是没效果的。

## 法一：用`max-height`替代`height`

`max-height`设置值大于等于`height`。

```css
.box {
	max-height: 0; //先将max-height设为0
	overflow: hidden; //超出部分隐藏
}

.box:hover {
	max-height: 500px;
}
```

-   效果：

    -   max-height 为 500 时
        ![500](http://p9secbq22.bkt.clouddn.com/18-7-16/20969048.jpg)
    -   max-height 为 5000 时
        ![5000](http://p9secbq22.bkt.clouddn.com/18-7-16/75092849.jpg)
    -   max-height 为 50000 时
        ![50000](http://p9secbq22.bkt.clouddn.com/18-7-16/14793972.jpg)

-   小结：
    -   当`max-height`略大于内容高度时，会得到比较不错的展开效果；
    -   当`max-height`远大于内容高度时，展开效果难以控制，且收起时会有明显延迟；
    -   内容高度不同时，展开效果差异明显。

## 法二：使用 js 获取实际高度
此方法需要给内容添加一个包裹层，在点击展开时，获取内容高度，并设置包裹层的高度为内容高度。

```html
<div class="wrap">
  <div class="box">
    <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Molestias neque ex voluptate nisi reiciendis animi. Perferendis asperiores consequatur eveniet tempora quaerat accusantium maxime itaque? Cumque ea aut blanditiis modi consequatur.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Praesentium est recusandae eius dignissimos, labore necessitatibus sunt officiis consequatur ad modi eaque aut repellendus suscipit dolores non, quo, voluptates culpa ipsa.</p>
  </div>
</div>

<button>展开</button>
```

```css
.wrap {
  height: 0;
  overflow: hidden;
  transition: height 2s;
}

```

```js
$('button').click(function() {
  var target = $('.box').outerHeight();
  $('.wrap').css('height', target + 'px');
});
```

* 完整版请参照: [“更多|收起”交互中渐进使用transition动画](https://www.zhangxinxu.com/wordpress/2012/10/more-display-show-hide-tranisition/)

## 法三：jquery--slideToggle()

```css
.box {
  display: none;
}
```

```js
$('button').click(function() {
  $('.box').slideToggle();
});
```

若元素边框较大，收起时会有卡顿效果。


